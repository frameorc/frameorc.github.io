async function F({read:g,write:S,interval:b=5000}){let q,x,y,z=Infinity;function A(C=b){q??=new Promise((E)=>x=E).then(()=>S(B)).finally(()=>{q=void 0,z=Infinity});let D=Date.now()+C;if(!(D>=z))clearTimeout(y),y=setTimeout(x,C),z=D;return q}let B={save:A,data:void 0};return await g(B),B}async function I(g,S){return await F({interval:S,write(b){localStorage.setItem(g,JSON.stringify(b.data))},read(b){let q=localStorage.getItem(g);if(q!==void 0)b.data=JSON.parse(q)}})}export{I as State};
